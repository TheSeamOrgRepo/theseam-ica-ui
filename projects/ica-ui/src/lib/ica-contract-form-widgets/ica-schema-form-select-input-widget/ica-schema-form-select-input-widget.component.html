<div
  [class]="'form-field form-field--contract form-field--select ' + (options?.htmlClass || '')">
  <label *ngIf="options?.title"
    [attr.for]="'control' + layoutNode?._id"
    [class]="'form-field__label ' + (options?.labelHtmlClass || '')"
    [style.display]="options?.notitle ? 'none' : ''"
    [innerHTML]="options?.title"></label>
  <span *ngIf="options.required" style="color: red;">*</span>
  <div class="select">
    <select *ngIf="boundControl"
      [formControl]="formControl"
      [attr.aria-describedby]="'control' + layoutNode?._id + 'Status'"
      [attr.readonly]="options?.readonly ? 'readonly' : null"
      [attr.required]="options?.required"
      [class]="'form-field__select ' + (options?.fieldHtmlClass || '')"
      [id]="'control' + layoutNode?._id"
      [name]="controlName">
      <ng-template ngFor let-selectItem [ngForOf]="selectList">
        <option *ngIf="!isArray(selectItem?.items)"
          [value]="selectItem?.value">
          <span [innerHTML]="selectItem?.name"></span>
        </option>
        <optgroup *ngIf="isArray(selectItem?.items)"
          [label]="selectItem?.group">
          <option *ngFor="let subItem of selectItem.items"
            [value]="subItem?.value">
            <span [innerHTML]="subItem?.name"></span>
          </option>
        </optgroup>
      </ng-template>
    </select>
    <select *ngIf="!boundControl"
      [attr.aria-describedby]="'control' + layoutNode?._id + 'Status'"
      [attr.readonly]="options?.readonly ? 'readonly' : null"
      [attr.required]="options?.required"
      [class]="'form-field__select ' + (options?.fieldHtmlClass || '')"
      [disabled]="controlDisabled"
      [id]="'control' + layoutNode?._id"
      [name]="controlName"
      (change)="updateValue($event)">
      <ng-template ngFor let-selectItem [ngForOf]="selectList">
        <option *ngIf="!isArray(selectItem?.items)"
          [selected]="selectItem?.value === controlValue"
          [value]="selectItem?.value">
          <span [innerHTML]="selectItem?.name"></span>
        </option>
        <optgroup *ngIf="isArray(selectItem?.items)"
          [label]="selectItem?.group">
          <option *ngFor="let subItem of selectItem.items"
            [attr.selected]="subItem?.value === controlValue"
            [value]="subItem?.value">
            <span [innerHTML]="subItem?.name"></span>
          </option>
        </optgroup>
      </ng-template>
    </select>
  </div>
</div>
